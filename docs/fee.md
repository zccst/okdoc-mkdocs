# 费率模型

本章的内容基于以下前提：
 
- 每个都能获取到最近的成交价，刚上架的数字资产交易对采用初始设置的价格作为最近成交价

## 订单失效

**收取条件**

取消订单或者订单过期时，该订单没有部分成交过，即下单数量和剩余数量相等



**收取规则**

1. 先处理失效订单，将订单中的token返还到余额

2. 假设订单中锁定的数字资产为xxx，那么扣除锁定的xxx数量 * 0.05%作为手续费。



## 订单成交

**收取条件**

订单成交时，需要按成交额比例收取一定的手续费

**手续费收取优先级**

优先使用okt支付，okt不足时才会使用其他数字资产支付。

**收取规则**

1. 先成交订单，扣除用户的卖出数字资产，增加用户的买入数字资产
2. 按照成交价计算与订单等价的okt总数：如果数字资产交易对为acoin/okt，那么oktAmt=成交量\*订单成交价；如果数字资产交易对为acoin/bcoin，那么oktAmt=成交量\*订单成交价\*bcoin_okt价格。
3. 假设采用okt支付，feeNative=oktAmt\*feeRate
4. 判断用户账户的okt余额是否够用，如果够用，则从用户账户余额中扣除相应数量的okt
5. 如果用户账户的okt余额不足以支付手续费，那么直接按比例扣除订单成交后用户收到的token

**目前手续费参数参考**

为鼓励用户使用和持有okt，采用OKT支付时手续费打折

Operation | Pay in non-okt | Pay in okt
---|---|---
Deal | 0.1% | 0.04%


## 其他手续费一览

| 模块  | 命令           | 是否抵押 | 系统手续费 | 业务手续费                             |
|-------|----------------|----------|------------|----------------------------------------|
| 选举  | 创建验证人     | 是       | 0.0125     |                                        |
|       | 编辑验证人信息 |          | 0.0125     |                                        |
|       | 委托人委托     | 是       | 0.0125     |                                        |
|       | 委托人解除委托 |          | 0.0125     |                                        |
|       | 委托人更改委托 | 是       | 0.0125     |                                        |
| 分红  | 修改分红地址   |          | 0.0125     |                                        |
| 治理  | 发起提案       | 是       | 0.0125     |                                        |
|       | 针对提案抵押   | 是       | 0.0125     |                                        |
|       | 提案投票-其他  |          | 0.0125     |                                        |
|       | 提案投票-数字资产交易对申请  |          |            | 0%                                     |
| 订单  | 挂单           | 是       | 0          |                                        |
|       | 撤单           |          |            | 0.05% |
| Token | 数字资产交易对激活       |          |            | 100000                                 |
|       | 增发           |          |            | 2000                                   |
|       | 销毁           |          |            | 10                                     |
|       | 冻结           |          |            | 0.1                                    |
|       | 转账           |          | 0.0125     |                                        |
|       | 批量转账       |          | n*0.01     |                                        |
|       | 发行           |          |            | 20000                                  |
|       | ownership转移  |          |            | 10                                     |

